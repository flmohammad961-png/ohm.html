<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ù‚Ø§ÙˆÙ…Øªâ€ŒÙ‡Ø§</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            direction: rtl;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            padding: 15px;
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }
        .header h1 {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 10px;
        }
        .designer-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.9em;
        }
        .controls {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
        }
        .control-group {
            margin-bottom: 15px;
        }
        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
            font-size: 1em;
        }
        .input-group {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }
        input[type="number"] {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            width: 80px;
            text-align: center;
        }
        button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            touch-action: manipulation;
        }
        button:active { transform: scale(0.95); }
        .btn-secondary { background: #6c757d; }
        .btn-danger { background: #dc3545; }
        .btn-success { background: #28a745; }
        .btn-warning { background: #ffc107; color: #333; }
        .circuit-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            border: 2px solid #667eea;
            margin-bottom: 15px;
        }
        .circuit-box h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
            text-align: center;
        }
        canvas {
            display: block;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            max-width: 100%;
            height: auto;
        }
        .formula-box {
            background: white;
            padding: 12px;
            border-radius: 10px;
            margin-top: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .formula-box:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .formula { 
            font-size: 1em; 
            margin: 8px 0; 
            word-wrap: break-word;
        }
        .result {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px;
            border-radius: 10px;
            font-size: 1.2em;
            text-align: center;
            margin-top: 10px;
            font-weight: bold;
        }
        .detailed-calc {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-right: 4px solid #4CAF50;
            display: none;
        }
        .detailed-calc.show {
            display: block;
            animation: slideDown 0.3s ease-out;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .calc-step {
            margin: 10px 0;
            padding: 15px;
            background: white;
            border-radius: 6px;
            border-right: 3px solid #2196F3;
        }
        .calc-step-title {
            font-weight: bold;
            color: #2196F3;
            margin-bottom: 10px;
            font-size: 1.05em;
        }
        .calc-step-content {
            color: #333;
            line-height: 2.5;
            font-size: 1.1em;
        }
        .math-equation {
            background: #f0f8ff;
            padding: 12px;
            margin: 8px 0;
            border-radius: 6px;
            border-right: 3px solid #4CAF50;
            overflow-x: auto;
            text-align: center;
        }
        .math-result {
            background: #fff3e0;
            padding: 12px;
            margin: 8px 0;
            border-radius: 6px;
            border-right: 3px solid #FF9800;
            font-weight: bold;
            font-size: 1.15em;
            text-align: center;
        }
        .final-result {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1.3em;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .toggle-calc-btn {
            display: inline-block;
            padding: 8px 15px;
            background: #4CAF50;
            color: white;
            border-radius: 6px;
            margin-top: 10px;
            cursor: pointer;
            font-size: 0.9em;
        }
        .toggle-calc-btn:active { transform: scale(0.95); }
        .group-box {
            margin: 12px 0;
            padding: 12px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .group-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }
        .group-title {
            font-size: 1.1em;
            font-weight: bold;
        }
        .type-buttons { display: flex; gap: 5px; }
        .type-btn {
            padding: 8px 12px;
            font-size: 0.9em;
            min-width: 70px;
        }
        .branch-box {
            background: #f0f0f0;
            padding: 10px;
            margin: 8px 0;
            border-radius: 8px;
            border-right: 3px solid #FF9800;
        }
        .branch-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .resistor-checks {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        .resistor-check {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            background: #fff;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s;
        }
        .resistor-check:active { transform: scale(0.95); }
        .resistor-check.selected {
            background: #e3f2fd;
            border-color: #2196F3;
        }
        .resistor-check input {
            margin-left: 8px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        .resistor-check label {
            cursor: pointer;
            font-weight: bold;
            user-select: none;
        }
        .help-box {
            background: #fff3cd;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-right: 4px solid #ffc107;
            cursor: pointer;
            transition: all 0.3s;
        }
        .help-box:hover { box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .help-box h4 {
            color: #856404;
            margin-bottom: 8px;
            font-size: 1em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .help-box p {
            margin: 5px 0;
            color: #856404;
            font-size: 0.9em;
        }
        .help-content {
            display: none;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 2px dashed #ffc107;
        }
        .help-content.show {
            display: block;
            animation: slideDown 0.3s ease-out;
        }
        .help-section {
            background: white;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
            border-right: 3px solid #4CAF50;
        }
        .help-section h5 {
            color: #4CAF50;
            margin-bottom: 8px;
            font-size: 1em;
        }
        .help-section ul {
            margin: 8px 0;
            padding-right: 20px;
        }
        .help-section li {
            margin: 5px 0;
            line-height: 1.6;
        }
        .help-example {
            background: #e3f2fd;
            padding: 10px;
            margin: 8px 0;
            border-radius: 6px;
            border-right: 3px solid #2196F3;
            font-size: 0.95em;
        }
        .help-toggle {
            font-size: 0.9em;
            color: #856404;
            cursor: pointer;
        }
        .count-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            padding: 15px;
            background: white;
            border-radius: 10px;
        }
        .count-btn {
            font-size: 1.5em;
            width: 50px;
            height: 50px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .count-display {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            min-width: 60px;
            text-align: center;
        }
        @media (max-width: 768px) {
            .header h1 { font-size: 1.3em; }
            canvas { width: 100% !important; height: auto !important; }
            .type-buttons { width: 100%; justify-content: space-between; }
            .group-header { flex-direction: column; align-items: flex-start; }
            .calc-step-content { font-size: 1em; }
            .count-btn { width: 45px; height: 45px; font-size: 1.3em; }
            .count-display { font-size: 1.8em; min-width: 50px; }
            input[type="number"] { width: 70px; }
        }
        @media (min-width: 769px) {
            .container { padding: 30px; }
            .controls { padding: 25px; }
            .circuit-box { padding: 25px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš¡ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ù‚Ø§ÙˆÙ…Øªâ€ŒÙ‡Ø§ âš¡</h1>
            <div class="designer-info">
                <strong>Ø·Ø±Ø§Ø­ Ùˆ Ø³Ø§Ø²Ù†Ø¯Ù‡:</strong> Ù…Ø­Ù…Ø¯ ÙÙ„Ø§Ø­ Ù„Ø§Ù„Ù‡â€ŒØ²Ø§Ø±ÛŒ<br>
                <strong>Ú©Ø§Ø±Ø´Ù†Ø§Ø³ Ø§Ø±Ø´Ø¯ ÙÛŒØ²ÛŒÚ©</strong>
            </div>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label>ØªØ¹Ø¯Ø§Ø¯ Ù…Ù‚Ø§ÙˆÙ…Øªâ€ŒÙ‡Ø§:</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount(-1)">âˆ’</button>
                    <span class="count-display" id="count">5</span>
                    <button class="count-btn" onclick="changeCount(1)">+</button>
                </div>
            </div>
            
            <div id="resistors"></div>
            
            <div class="help-box" onclick="toggleHelp()">
                <h4>
                    <span>ğŸ“š Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„</span>
                    <span class="help-toggle" id="helpToggle">ğŸ‘ï¸ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</span>
                </h4>
                
                <div class="help-content" id="helpContent">
                    <div class="help-section">
                        <h5>ğŸ”§ ØªÙ†Ø¸ÛŒÙ… ØªØ¹Ø¯Ø§Ø¯ Ù…Ù‚Ø§ÙˆÙ…Øªâ€ŒÙ‡Ø§</h5>
                        <ul>
                            <li>Ø¨Ø§ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ + Ùˆ âˆ’ ØªØ¹Ø¯Ø§Ø¯ Ù…Ù‚Ø§ÙˆÙ…Øªâ€ŒÙ‡Ø§ Ø±Ø§ ØªØ§ 10 Ø¹Ø¯Ø¯ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯</li>
                            <li>Ù…Ù‚Ø¯Ø§Ø± Ù‡Ø± Ù…Ù‚Ø§ÙˆÙ…Øª Ø±Ø§ Ø¨Ø§ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ +1ØŒ +10ØŒ -1ØŒ -10 ÛŒØ§ ØªØ§ÛŒÙ¾ Ù…Ø³ØªÙ‚ÛŒÙ… ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯</li>
                        </ul>
                    </div>
                    
                    <div class="help-section">
                        <h5>ğŸ”— Ú¯Ø±ÙˆÙ‡ Ø³Ø±ÛŒ (Series)</h5>
                        <ul>
                            <li>Ù…Ù‚Ø§ÙˆÙ…Øªâ€ŒÙ‡Ø§ÛŒ ÛŒÚ© Ú¯Ø±ÙˆÙ‡ Ø³Ø±ÛŒ Ù¾Ø´Øª Ø³Ø± Ù‡Ù… Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù†Ø¯</li>
                            <li>Ù…Ù‚Ø§ÙˆÙ…Øª Ù…Ø¹Ø§Ø¯Ù„ = Ø¬Ù…Ø¹ Ù…Ù‚Ø§ÙˆÙ…Øªâ€ŒÙ‡Ø§</li>
                            <li>ÙØ±Ù…ÙˆÙ„: R = Râ‚ + Râ‚‚ + Râ‚ƒ + ...</li>
                        </ul>
                        <div class="help-example">
                            <strong>Ù…Ø«Ø§Ù„:</strong> Râ‚=100Î© Ùˆ Râ‚‚=200Î© Ø¨Ù‡ ØµÙˆØ±Øª Ø³Ø±ÛŒ<br>
                            R_eq = 100 + 200 = 300Î©
                        </div>
                    </div>
                    
                    <div class="help-section">
                        <h5>âš¡ Ú¯Ø±ÙˆÙ‡ Ù…ÙˆØ§Ø²ÛŒ (Parallel)</h5>
                        <ul>
                            <li>Ú¯Ø±ÙˆÙ‡ Ù…ÙˆØ§Ø²ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ú†Ù†Ø¯ÛŒÙ† <strong>Ø´Ø§Ø®Ù‡</strong> Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯</li>
                            <li>Ù‡Ø± Ø´Ø§Ø®Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ ÛŒÚ© ÛŒØ§ Ú†Ù†Ø¯ Ù…Ù‚Ø§ÙˆÙ…Øª Ø³Ø±ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯</li>
                            <li>Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ù‡Ù… Ù…ÙˆØ§Ø²ÛŒ Ù‡Ø³ØªÙ†Ø¯</li>
                            <li>ÙØ±Ù…ÙˆÙ„ Ù…ÙˆØ§Ø²ÛŒ: 1/R = 1/Râ‚ + 1/Râ‚‚ + 1/Râ‚ƒ + ...</li>
                        </ul>
                        <div class="help-example">
                            <strong>Ù…Ø«Ø§Ù„ 1 (Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø¯Ù‡):</strong><br>
                            3 Ø´Ø§Ø®Ù‡ Ù…ÙˆØ§Ø²ÛŒ: Râ‚=100Î©ØŒ Râ‚‚=200Î©ØŒ Râ‚ƒ=150Î©<br>
                            1/R = 1/100 + 1/200 + 1/150 = 0.0217<br>
                            R_eq = 46.15Î©
                        </div>
                        <div class="help-example">
                            <strong>Ù…Ø«Ø§Ù„ 2 (Ø´Ø§Ø®Ù‡ Ø¨Ø§ Ú†Ù†Ø¯ Ù…Ù‚Ø§ÙˆÙ…Øª Ø³Ø±ÛŒ):</strong><br>
                            Ø´Ø§Ø®Ù‡ 1: (Râ‚+Râ‚‚) = 100+200 = 300Î© Ø³Ø±ÛŒ<br>
                            Ø´Ø§Ø®Ù‡ 2: Râ‚ƒ = 150Î©<br>
                            Ø­Ø§Ù„Ø§ Ø§ÛŒÙ† Ø¯Ùˆ Ø´Ø§Ø®Ù‡ Ù…ÙˆØ§Ø²ÛŒ Ù‡Ø³ØªÙ†Ø¯:<br>
                            1/R = 1/300 + 1/150 = 0.01<br>
                            R_eq = 100Î©
                        </div>
                    </div>
                    
                    <div class="help-section">
                        <h5>ğŸ”€ ØªØ±Ú©ÛŒØ¨ Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§</h5>
                        <ul>
                            <li>Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ú†Ù†Ø¯ÛŒÙ† Ú¯Ø±ÙˆÙ‡ Ø¨Ø³Ø§Ø²ÛŒØ¯</li>
                            <li>Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª <strong>Ø³Ø±ÛŒ</strong> Ø¨Ù‡ Ù‡Ù… Ù…ØªØµÙ„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</li>
                            <li>Ù‡Ø± Ú¯Ø±ÙˆÙ‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø³Ø±ÛŒ ÛŒØ§ Ù…ÙˆØ§Ø²ÛŒ Ø¨Ø§Ø´Ø¯</li>
                        </ul>
                        <div class="help-example">
                            <strong>Ù…Ø«Ø§Ù„ Ù¾ÛŒÚ†ÛŒØ¯Ù‡:</strong><br>
                            Ú¯Ø±ÙˆÙ‡ 1 (Ù…ÙˆØ§Ø²ÛŒ): 2 Ø´Ø§Ø®Ù‡ â†’ Ø´Ø§Ø®Ù‡ 1: Râ‚=100Î©ØŒ Ø´Ø§Ø®Ù‡ 2: (Râ‚‚+Râ‚ƒ)=200+150=350Î©<br>
                            Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú¯Ø±ÙˆÙ‡ 1: 1/Râ‚ = 1/100 + 1/350 = 0.0129 â†’ Râ‚ = 77.78Î©<br><br>
                            Ú¯Ø±ÙˆÙ‡ 2 (Ø³Ø±ÛŒ): Râ‚„+Râ‚… = 300+250 = 550Î©<br><br>
                            <strong>Ù†Ù‡Ø§ÛŒÛŒ (Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ Ø³Ø±ÛŒ):</strong><br>
                            R_total = 77.78 + 550 = 627.78Î©
                        </div>
                    </div>
                    
                    <div class="help-section">
                        <h5>ğŸ“Š Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­Ø§Ø³Ø¨Ø§Øª</h5>
                        <ul>
                            <li>Ø±ÙˆÛŒ "Ù…Ø­Ø§Ø³Ø¨Ù‡ Ùˆ Ø±Ø³Ù…" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</li>
                            <li>Ù…Ø¯Ø§Ø± Ø±Ø³Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯</li>
                            <li>Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¯Ù† Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ú¯Ø§Ù… Ø¨Ù‡ Ú¯Ø§Ù… Ø±ÙˆÛŒ "ğŸ‘ï¸ Ù†Ù…Ø§ÛŒØ´ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ú©Ø§Ù…Ù„" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</li>
                            <li>Ù‡Ù…Ù‡ ÙØ±Ù…ÙˆÙ„â€ŒÙ‡Ø§ Ø¨Ø§ Ù†Ù…Ø§ÛŒØ´ Ø±ÛŒØ§Ø¶ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</li>
                        </ul>
                    </div>
                    
                    <div class="help-section">
                        <h5>ğŸ’¡ Ù†Ú©Ø§Øª Ù…Ù‡Ù…</h5>
                        <ul>
                            <li>Ù‡Ø± Ù…Ù‚Ø§ÙˆÙ…Øª ÙÙ‚Ø· Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯Ø± ÛŒÚ© Ú¯Ø±ÙˆÙ‡ Ùˆ ÛŒÚ© Ø´Ø§Ø®Ù‡ Ø¨Ø§Ø´Ø¯</li>
                            <li>Ø¯Ø± Ú¯Ø±ÙˆÙ‡ Ù…ÙˆØ§Ø²ÛŒØŒ Ø¯Ú©Ù…Ù‡ "Ø§ÙØ²ÙˆØ¯Ù† Ø´Ø§Ø®Ù‡" Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯ ØªØ§ Ø´Ø§Ø®Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¨Ø³Ø§Ø²ÛŒØ¯</li>
                            <li>Ù…Ù‚Ø§ÙˆÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ù‡Ø± Ø´Ø§Ø®Ù‡ Ø³Ø±ÛŒ Ù‡Ø³ØªÙ†Ø¯ØŒ Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§ Ù…ÙˆØ§Ø²ÛŒ</li>
                            <li>Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ Ù‡Ù…ÛŒØ´Ù‡ Ø³Ø±ÛŒ Ø¨Ù‡ Ù‡Ù… ÙˆØµÙ„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</li>
                        </ul>
                    </div>
                    
                    <div class="help-section">
                        <h5>ğŸ¯ Ù…Ø«Ø§Ù„ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ú©Ø§Ù…Ù„</h5>
                        <p><strong>Ù‡Ø¯Ù:</strong> Ø³Ø§Ø®Øª Ù…Ø¯Ø§Ø±: 2 Ù…ÙˆØ§Ø²ÛŒ + 2 Ø³Ø±ÛŒ + 3 Ù…ÙˆØ§Ø²ÛŒ</p>
                        <ol style="padding-right: 20px;">
                            <li>ØªØ¹Ø¯Ø§Ø¯ Ù…Ù‚Ø§ÙˆÙ…Øª Ø±Ø§ Ø¨Ù‡ 7 Ø¨Ø±Ø³Ø§Ù†ÛŒØ¯</li>
                            <li>3 Ú¯Ø±ÙˆÙ‡ Ø¨Ø³Ø§Ø²ÛŒØ¯ (Ø¯Ú©Ù…Ù‡ Ø§ÙØ²ÙˆØ¯Ù† Ú¯Ø±ÙˆÙ‡)</li>
                            <li><strong>Ú¯Ø±ÙˆÙ‡ 1:</strong> Ù…ÙˆØ§Ø²ÛŒ â†’ Râ‚ Ùˆ Râ‚‚ Ø±Ø§ ØªÛŒÚ© Ø¨Ø²Ù†ÛŒØ¯</li>
                            <li><strong>Ú¯Ø±ÙˆÙ‡ 2:</strong> Ø³Ø±ÛŒ â†’ Râ‚ƒ Ùˆ Râ‚„ Ø±Ø§ ØªÛŒÚ© Ø¨Ø²Ù†ÛŒØ¯</li>
                            <li><strong>Ú¯Ø±ÙˆÙ‡ 3:</strong> Ù…ÙˆØ§Ø²ÛŒ â†’ Râ‚…ØŒ Râ‚† Ùˆ Râ‚‡ Ø±Ø§ ØªÛŒÚ© Ø¨Ø²Ù†ÛŒØ¯</li>
                            <li>Ø±ÙˆÛŒ "Ù…Ø­Ø§Ø³Ø¨Ù‡ Ùˆ Ø±Ø³Ù…" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</li>
                        </ol>
                        <div class="help-example">
                            <strong>Ù†ØªÛŒØ¬Ù‡:</strong><br>
                            (Râ‚âˆ¥Râ‚‚) Ø³Ø±ÛŒ Ø¨Ø§ (Râ‚ƒ+Râ‚„) Ø³Ø±ÛŒ Ø¨Ø§ (Râ‚…âˆ¥Râ‚†âˆ¥Râ‚‡)
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="groupBox"></div>
            
            <button onclick="addGroup()" style="width: 100%; margin-top: 15px;" class="btn-success">â• Ø§ÙØ²ÙˆØ¯Ù† Ú¯Ø±ÙˆÙ‡ Ø¬Ø¯ÛŒØ¯</button>
            
            <button onclick="calc()" style="width: 100%; margin-top: 15px; padding: 15px; font-size: 1.1em;">ğŸ”„ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ùˆ Ø±Ø³Ù…</button>
        </div>
        
        <div class="circuit-box">
            <h3>ğŸ”€ Ù…Ø¯Ø§Ø± ØªØ±Ú©ÛŒØ¨ÛŒ</h3>
            <canvas id="main" width="800" height="400"></canvas>
            <div class="formula-box" onclick="toggleDetails()">
                <div class="formula"><strong>ÙØ±Ù…ÙˆÙ„:</strong></div>
                <div class="formula" id="f1"></div>
                <div class="formula" id="f2"></div>
                <div class="result" id="r1"></div>
                <div class="toggle-calc-btn">ğŸ‘ï¸ Ù†Ù…Ø§ÛŒØ´ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ú©Ø§Ù…Ù„</div>
                <div class="detailed-calc" id="detailedCalc"></div>
            </div>
        </div>
    </div>
    
    <script>
        let n = 5, vals = [100, 200, 150, 300, 250];
        let grps = [
            { type: 'p', branches: [[0], [1, 2]] },
            { type: 's', branches: [[3, 4]] }
        ];
        const subs = ['â‚','â‚‚','â‚ƒ','â‚„','â‚…','â‚†','â‚‡','â‚ˆ','â‚‰','â‚â‚€'];
        const names = ['Ø§ÙˆÙ„','Ø¯ÙˆÙ…','Ø³ÙˆÙ…','Ú†Ù‡Ø§Ø±Ù…','Ù¾Ù†Ø¬Ù…','Ø´Ø´Ù…','Ù‡ÙØªÙ…','Ù‡Ø´ØªÙ…','Ù†Ù‡Ù…','Ø¯Ù‡Ù…'];
        let detailedSteps = [];
        
        function toggleHelp() {
            const h = document.getElementById('helpContent');
            const t = document.getElementById('helpToggle');
            if (h.classList.contains('show')) {
                h.classList.remove('show');
                t.textContent = 'ğŸ‘ï¸ Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯';
            } else {
                h.classList.add('show');
                t.textContent = 'ğŸ”¼ Ø¨Ø³ØªÙ†';
            }
        }
        
        function toggleDetails() {
            const d = document.getElementById('detailedCalc');
            const b = document.querySelector('.toggle-calc-btn');
            if (d.classList.contains('show')) {
                d.classList.remove('show');
                b.textContent = 'ğŸ‘ï¸ Ù†Ù…Ø§ÛŒØ´ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ú©Ø§Ù…Ù„';
            } else {
                d.classList.add('show');
                b.textContent = 'ğŸ”¼ Ø¨Ø³ØªÙ† Ù…Ø­Ø§Ø³Ø¨Ø§Øª';
                if (window.MathJax) MathJax.typesetPromise([d]).catch(e => console.log(e));
            }
        }
        
        function addGroup() {
            grps.push({ type: 's', branches: [[]] });
            updateGrps();
        }
        
        function removeGroup(i) {
            grps.splice(i, 1);
            updateGrps();
            calc();
        }
        
        function setGrpType(i, t) {
            grps[i].type = t;
            if (t === 's' && grps[i].branches.length > 1) {
                grps[i].branches = [grps[i].branches.flat()];
            }
            updateGrps();
            calc();
        }
        
        function addBranch(g) {
            grps[g].branches.push([]);
            updateGrps();
        }
        
        function removeBranch(g, b) {
            if (grps[g].branches.length > 1) {
                grps[g].branches.splice(b, 1);
                updateGrps();
                calc();
            }
        }
        
        function togBranch(g, b, r) {
            grps.forEach(gr => gr.branches.forEach(br => {
                const i = br.indexOf(r);
                if (i > -1) br.splice(i, 1);
            }));
            if (event.target.checked) grps[g].branches[b].push(r);
            updateGrps();
            calc();
        }
        
        function updateGrps() {
            let html = '';
            const cols = ['#4CAF50','#2196F3','#FF9800','#E91E63','#9C27B0','#00BCD4','#8BC34A','#FFC107'];
            
            grps.forEach((g, i) => {
                const col = cols[i % cols.length];
                const isP = g.type === 'p';
                
                html += `<div class="group-box" style="border-right: 4px solid ${col};">
                    <div class="group-header">
                        <span class="group-title" style="color: ${col};">Ú¯Ø±ÙˆÙ‡ ${i+1}</span>
                        <div style="display: flex; gap: 5px;">
                            <button class="type-btn ${isP ? '' : 'btn-secondary'}" onclick="setGrpType(${i}, 'p')">âš¡ Ù…ÙˆØ§Ø²ÛŒ</button>
                            <button class="type-btn ${!isP ? '' : 'btn-secondary'}" onclick="setGrpType(${i}, 's')">ğŸ”— Ø³Ø±ÛŒ</button>
                            <button class="type-btn btn-danger" onclick="removeGroup(${i})">ğŸ—‘ï¸</button>
                        </div>
                    </div>`;
                
                if (isP) {
                    html += `<button onclick="addBranch(${i})" class="btn-warning" style="width: 100%; padding: 8px; margin: 10px 0;">
                        â• Ø§ÙØ²ÙˆØ¯Ù† Ø´Ø§Ø®Ù‡ Ø¬Ø¯ÛŒØ¯
                    </button>`;
                }
                
                g.branches.forEach((br, b) => {
                    if (isP) {
                        html += `<div class="branch-box">
                            <div class="branch-header">
                                <strong>Ø´Ø§Ø®Ù‡ ${b + 1}</strong>
                                ${g.branches.length > 1 ? `<button class="type-btn btn-danger" onclick="removeBranch(${i}, ${b})">Ø­Ø°Ù</button>` : ''}
                            </div><div class="resistor-checks">`;
                    } else {
                        html += `<div class="resistor-checks">`;
                    }
                    
                    for (let j = 0; j < n; j++) {
                        const chk = br.includes(j);
                        html += `<div class="resistor-check ${chk ? 'selected' : ''}" onclick="document.getElementById('c${i}_${b}_${j}').click()">
                            <input type="checkbox" ${chk ? 'checked' : ''} id="c${i}_${b}_${j}" onchange="togBranch(${i},${b},${j})">
                            <label>R${subs[j]} (${vals[j]}Î©)</label>
                        </div>`;
                    }
                    
                    html += `</div>`;
                    if (isP) html += `</div>`;
                });
                
                html += `</div>`;
            });
            
            document.getElementById('groupBox').innerHTML = html;
        }
        
        function changeCount(d) {
            n += d;
            if (n < 1) n = 1;
            if (n > 10) n = 10;
            document.getElementById('count').textContent = n;
            
            if (d > 0) vals.push(100);
            else if (vals.length > 1) {
                vals.pop();
                grps.forEach(g => g.branches.forEach(b => {
                    const i = b.indexOf(n);
                    if (i > -1) b.splice(i, 1);
                }));
            }
            
            updateInputs();
            updateGrps();
            calc();
        }
        
        function updateInputs() {
            let html = '';
            for (let i = 0; i < n; i++) {
                html += `<div class="control-group">
                    <label>Ù…Ù‚Ø§ÙˆÙ…Øª ${names[i]} (R${subs[i]}):</label>
                    <div class="input-group">
                        <button onclick="chg(${i},-10)">âˆ’10</button>
                        <button onclick="chg(${i},-1)">âˆ’1</button>
                        <input type="number" id="r${i}" value="${vals[i]}" min="1" onchange="upd(${i})">
                        <button onclick="chg(${i},1)">+1</button>
                        <button onclick="chg(${i},10)">+10</button>
                        <span>Î©</span>
                    </div>
                </div>`;
            }
            document.getElementById('resistors').innerHTML = html;
        }
        
        function chg(i, d) {
            const inp = document.getElementById('r' + i);
            let v = parseInt(inp.value) + d;
            if (v < 1) v = 1;
            inp.value = v;
            vals[i] = v;
            updateGrps();
            calc();
        }
        
        function upd(i) {
            vals[i] = parseInt(document.getElementById('r' + i).value) || 100;
            updateGrps();
            calc();
        }
        
        function drawR(ctx, x, y, w, h, lbl, val) {
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2.5;
            ctx.beginPath();
            const seg = 6, sw = w / seg;
            ctx.moveTo(x, y);
            for (let i = 0; i < seg; i++) {
                ctx.lineTo(x + (i + 0.5) * sw, y + (i % 2 === 0 ? -h : h));
            }
            ctx.lineTo(x + w, y);
            ctx.stroke();
            
            ctx.fillStyle = '#667eea';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(lbl, x + w/2, y - 15);
            ctx.fillStyle = '#333';
            ctx.font = '11px Arial';
            ctx.fillText(val + 'Î©', x + w/2, y + 25);
        }
        
        function drawCircuit(canvas, rs, groups) {
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const cy = canvas.height / 2;
            
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(20, cy);
            ctx.lineTo(canvas.width - 20, cy);
            ctx.stroke();
            
            let x = 60;
            
            groups.forEach(g => {
                if (g.type === 's') {
                    const allR = g.branches[0] || [];
                    allR.forEach(ri => {
                        drawR(ctx, x, cy, 40, 10, 'R' + subs[ri], rs[ri]);
                        x += 50;
                    });
                    x += 10;
                } else {
                    const branches = g.branches.filter(b => b.length > 0);
                    if (branches.length === 0) return;
                    
                    const x1 = x;
                    const maxLen = Math.max(...branches.map(b => b.length));
                    const bw = maxLen * 50 + 40;
                    const x2 = x1 + bw;
                    
                    const bh = 60;
                    const th = (branches.length - 1) * bh;
                    const sy = cy - th / 2;
                    
                    ctx.beginPath();
                    ctx.moveTo(x1, sy);
                    ctx.lineTo(x1, sy + th);
                    ctx.stroke();
                    
                    ctx.beginPath();
                    ctx.moveTo(x2, sy);
                    ctx.lineTo(x2, sy + th);
                    ctx.stroke();
                    
                    branches.forEach((br, bi) => {
                        const by = sy + bi * bh;
                        
                        ctx.beginPath();
                        ctx.moveTo(x1, by);
                        ctx.lineTo(x2, by);
                        ctx.stroke();
                        
                        let bx = x1 + 20;
                        br.forEach(ri => {
                            drawR(ctx, bx, by, 40, 8, 'R' + subs[ri], rs[ri]);
                            bx += 50;
                        });
                    });
                    
                    x = x2 + 30;
                }
            });
            
            ctx.fillStyle = '#e74c3c';
            ctx.beginPath();
            ctx.arc(20, cy, 6, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('+', 20, cy - 15);
            
            ctx.fillStyle = '#3498db';
            ctx.beginPath();
            ctx.arc(canvas.width - 20, cy, 6, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillText('-', canvas.width - 20, cy - 15);
        }
        
        function calc() {
            const rs = [];
            for (let i = 0; i < n; i++) {
                const inp = document.getElementById('r' + i);
                rs.push(inp ? (parseInt(inp.value) || 100) : 100);
            }
            
            detailedSteps = [];
            let tot = 0, fm = '', cl = '';
            let sn = 1;
            let groupResults = [];
            
            grps.forEach((g, gi) => {
                if (g.type === 's') {
                    const br = g.branches[0] || [];
                    if (br.length === 0) return;
                    
                    const sum = br.reduce((s, i) => s + rs[i], 0);
                    tot += sum;
                    groupResults.push(sum);
                    
                    if (br.length > 1) {
                        detailedSteps.push({
                            title: `Ú¯Ø±ÙˆÙ‡ ${gi + 1} (Ø§ØªØµØ§Ù„ Ø³Ø±ÛŒ):`,
                            content: `<div class="math-equation">$$R_{${gi+1}} = ${br.map(i => `R_{${subs[i]}}`).join(' + ')}$$</div>
                                   <div class="math-equation">$$R_{${gi+1}} = ${br.map(i => rs[i]).join(' + ')}$$</div>
                                   <div class="math-result">$$R_{${gi+1}} = ${sum.toFixed(2)} \\, \\Omega$$</div>`
                        });
                        fm += (gi > 0 ? ' + ' : '') + '(' + br.map(i => 'R' + subs[i]).join('+') + ')';
                        cl += (gi > 0 ? ' + ' : '') + sum.toFixed(2);
                    } else {
                        detailedSteps.push({
                            title: `Ú¯Ø±ÙˆÙ‡ ${gi + 1}:`,
                            content: `<div class="math-result">$$R_{${gi+1}} = R_{${subs[br[0]]}} = ${rs[br[0]]} \\, \\Omega$$</div>`
                        });
                        fm += (gi > 0 ? ' + ' : '') + 'R' + subs[br[0]];
                        cl += (gi > 0 ? ' + ' : '') + sum.toFixed(2);
                    }
                } else {
                    const brs = g.branches.filter(b => b.length > 0);
                    if (brs.length === 0) return;
                    
                    detailedSteps.push({
                        title: `Ú¯Ø±ÙˆÙ‡ ${gi + 1} (Ø§ØªØµØ§Ù„ Ù…ÙˆØ§Ø²ÛŒ - ${brs.length} Ø´Ø§Ø®Ù‡):`,
                        content: ``
                    });
                    
                    const beqs = brs.map((b, bi) => {
                        const bsum = b.reduce((s, i) => s + rs[i], 0);
                        
                        if (b.length > 1) {
                            detailedSteps.push({
                                title: `  Ø´Ø§Ø®Ù‡ ${bi + 1} (Ø³Ø±ÛŒ):`,
                                content: `<div class="math-equation">$$R_{Ø´Ø§Ø®Ù‡${bi+1}} = ${b.map(i => `R_{${subs[i]}}`).join(' + ')}$$</div>
                                       <div class="math-equation">$$R_{Ø´Ø§Ø®Ù‡${bi+1}} = ${b.map(i => rs[i]).join(' + ')}$$</div>
                                       <div class="math-result">$$R_{Ø´Ø§Ø®Ù‡${bi+1}} = ${bsum.toFixed(2)} \\, \\Omega$$</div>`
                            });
                        } else {
                            detailedSteps.push({
                                title: `  Ø´Ø§Ø®Ù‡ ${bi + 1}:`,
                                content: `<div class="math-result">$$R_{Ø´Ø§Ø®Ù‡${bi+1}} = R_{${subs[b[0]]}} = ${rs[b[0]]} \\, \\Omega$$</div>`
                            });
                        }
                        return bsum;
                    });
                    
                    const psum = beqs.reduce((s, eq) => s + 1/eq, 0);
                    const peq = 1 / psum;
                    tot += peq;
                    groupResults.push(peq);
                    
                    detailedSteps.push({
                        title: `  Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÙˆØ§Ø²ÛŒ Ú¯Ø±ÙˆÙ‡ ${gi + 1}:`,
                        content: `<div class="math-equation">$$\\frac{1}{R_{${gi+1}}} = ${beqs.map((eq, i) => `\\frac{1}{${eq.toFixed(2)}}`).join(' + ')}$$</div>
                               <div class="math-equation">$$\\frac{1}{R_{${gi+1}}} = ${psum.toFixed(6)}$$</div>
                               <div class="math-result">$$R_{${gi+1}} = ${peq.toFixed(2)} \\, \\Omega$$</div>`
                    });
                    
                    fm += (gi > 0 ? ' + ' : '') + '[' + brs.map(b => {
                        if (b.length > 1) return '(' + b.map(i => 'R' + subs[i]).join('+') + ')';
                        return 'R' + subs[b[0]];
                    }).join('âˆ¥') + ']';
                    cl += (gi > 0 ? ' + ' : '') + peq.toFixed(2);
                }
            });
            
            if (grps.length > 1) {
                detailedSteps.push({
                    title: `Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ù‚Ø§ÙˆÙ…Øª Ú©Ù„ (Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ Ø³Ø±ÛŒ Ù‡Ø³ØªÙ†Ø¯):`,
                    content: `<div class="math-equation">$$R_{Ú©Ù„} = ${groupResults.map((_, i) => `R_{${i+1}}`).join(' + ')}$$</div>
                           <div class="math-equation">$$R_{Ú©Ù„} = ${groupResults.map(r => r.toFixed(2)).join(' + ')}$$</div>
                           <div class="final-result">$$R_{Ù…Ø¹Ø§Ø¯Ù„} = ${tot.toFixed(2)} \\, \\Omega$$</div>`
                });
            } else {
                detailedSteps.push({
                    title: `Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ:`,
                    content: `<div class="final-result">$$R_{Ù…Ø¹Ø§Ø¯Ù„} = ${tot.toFixed(2)} \\, \\Omega$$</div>`
                });
            }            
            document.getElementById('f1').innerHTML = 'R<sub>eq</sub> = ' + (fm || '0');
            document.getElementById('f2').innerHTML = 'Ù…Ø­Ø§Ø³Ø¨Ù‡: ' + (cl || '0');
            document.getElementById('r1').innerHTML = `Ù…Ù‚Ø§ÙˆÙ…Øª Ù…Ø¹Ø§Ø¯Ù„ = ${tot.toFixed(2)} Î©`;
            
            let dhtml = '<h4 style="color: #4CAF50; margin-bottom: 15px;">ğŸ“Š Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ú¯Ø§Ù… Ø¨Ù‡ Ú¯Ø§Ù…:</h4>';
            detailedSteps.forEach(st => {
                dhtml += `<div class="calc-step">
                    <div class="calc-step-title">${st.title}</div>
                    <div class="calc-step-content">${st.content}</div>
                </div>`;
            });
            document.getElementById('detailedCalc').innerHTML = dhtml;
            
            drawCircuit(document.getElementById('main'), rs, grps);
        }
        
        updateInputs();
        updateGrps();
        calc();
    </script>
</body>
</html>
